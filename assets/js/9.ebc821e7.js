(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{280:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),a("p",[t._v("AgreeSDK 允许您使用标准的 Web 技术 - HTML5、CSS3 和 JavaScript 进行跨平台开发，JS SDK 参考 Apache 开源框架 "),a("a",{attrs:{href:"http://cordova.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cordova"),a("OutboundLink")],1),t._v(" 进行改造优化，提供了一套统一的 API 可以方便的调用原生 API。应用程序在针对每个平台的基座中执行，并依靠符合标准的 API 绑定来访问每个设备的功能，例如设备信息、摄像头，文件系统等。")]),a("p",[t._v("不同平台提供标准的 JS SDK 和原生壳，业务逻辑采用 web 技术开发的开发模式可以更好的实现多端复用同一套代码。面向不同系统的原生壳，根据宿主系统的特性封装不同功能的原生插件（例如调用定位、访问相册），并根据系统版本和功能制定插件版本。")]),a("p",[t._v("通过一套统一标准的 JS 层与 Native 层通信的插件通信机制，可以很方便的进行原生插件拓展，兼容现有的其他原生开发及 web 开发使用的技术方案，可以满足不同的业务需求，同时很好的发挥了不同平台的优势。")]),t._m(2),a("p",[t._v("为了满足不同的业务需求，平台提供了三大类别插件：设备组件、业务组件、三方组件。设备插件主要提供调用设备原生系统的 API，在此基础上业务层只需要调用标准的 API 即可实现底层提供的系统原生功能；业务插件是客户端基本默认插件，通过配置文件设置简化了开发流程，提供基本的开发时调试和运行时安全通信、更新、监控等基本功能保障；三方插件是可选的，用以补充某些业务场景下的功能需求，如移动背夹、语音识别、地图定位等。")]),t._m(3),a("p",[t._v("AgreeSDK 参考 Cordova 开源框架做了很多优化和改造，提供了插件拓展的能力，同时也封装了一些常用的组件，简化了开发人员的工作流程，让新手上手起来更容易。Cordova 开发通常需要本地配置开发环境，原生插件版本控制以及定制化对于不熟悉原生 App 开发的开发人员来说，有不小的开发成本。AgreeSDK 对开发阶段及打包发布都提供一些很实用的开发管理工具。AgreeSDK 满足只需要简单修改就可以兼容使用 Cordova 现有插件，但是为了更加统一标准的规范，建议遵循 AgreeSDK 提供的插件开发规范进行编写插件。")]),t._m(4),a("p",[t._v("AgreeSDK 新版本简化了 Cordova 繁琐的配置和调试方式，从底层上剔除了 Cordova 过时的架构设计，JS 部分采用 ES6 开发，支持同步和异步调用两种模式，原生层增加更多工具类对插件进行拓展，提供原生插件拓展和原生 UI 的快速开发。")]),t._m(5),t._m(6),a("p",[t._v("或者作为 Vue.js 拓展插件使用，在 Vue.js 开发工程引入：")]),t._m(7),a("p",[t._v("当作为 Vue 插件使用的时候，可以通过配置参数对基座内部进行全局控制。字段说明：")]),t._m(8),t._m(9),t._m(10),t._m(11),a("p",[t._v("以下从技术维度简要说明插件开发的规范和技术细节，具体代码可以参考 Android 开发工程例子。")]),t._m(12),t._m(13),t._m(14),a("p",[t._v("JS 层调用 Java 层通过类似于前端调用服务 \b 的形式实现，通过 AgreeSDK 提供的桥梁，我们可以使用 AgreeSDK.bridge.execSync 和 AgreeSDK.bridge.exec 实现调用。")]),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),a("p",[t._v("JS 层如果想接受原生层主动发送的消息，需要通过事件监听的方式去执行，例如：")]),t._m(31),a("p",[t._v("JS 层监听原生层的消息：")]),t._m(32),t._m(33),t._m(34),t._m(35),a("p",[t._v("插件使用 initialize 初始化启动：")]),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),a("p",[t._v("当服务器部署资源文件有部分文件改动时，客户端会将服务器改动的文件差量下载更新到本地，而之前服务器其他未改动的文件则不会下载。")]),a("p",[t._v("差量文件更新是依据全局资源地图 GRM（Global Resource Map）下载的。服务器端 ABS workspace 下会有一个“.grm” 文件夹， HEAD 文件，在“.grm”文件夹中，存在一个名为 HEAD 的文件，里面存放的是当前 GRM 版本。存在一个名为 MAP+Version（version 是一串 MD5 加密后的字符串）的文件，里面内容是当前 Workspace 下的文件列表。文件中每一行内容格式是[文件路径名+“:”+MD5 加密后的字符串]。")]),t._m(42),t._m(43),a("p",[t._v("首先检测本地 GRM 是否存在，如果不存在，说明是第一次更新资源文件，需要从服务器端下载 GRM。")]),t._m(44),a("p",[t._v("通过 Http 请求获取 GRM 的版本号（获取的版本号是一个 MD5 加密后的字符串），将获取到的版本与当前本地 GRM 版本进行对比，如果两个版本不一致，则需要从服务器更新 GRM，并将新的 GRM 版本写入到 HEAD 文件中，来替换原来的本地 GRM 版本。如果之前本地不存在 GRM 文件夹，则需要下载 GRM。")]),t._m(45),a("p",[t._v("步骤 1 和 2 是对 GRM 的检测更新。只有在本地 GRM 存在的情况下，才能读取本地 MAP 文件。读取 MAP 文件后会得到资源文件的每一个文件的路径和 MD5 加密的标记值。")]),t._m(46),a("p",[t._v("遍历本地 workspace 下的文件，并给每个文件添加 MD5 加密后的标记文件，将本地 MD5 加密后的标记与 MAP 文件中的标记进行对比，若不同，则表示需要更新资源，否则表示不需要更新资源。")]),t._m(47),a("p",[t._v("在 ABS workspace 下新建 app/www 目录，将前端开发打包完成的 dist 文件夹下的文件放 ABS workspace/app/www 目录下，修改客户端工程 app/src/main/assets/www/manifest.json 配置文件中 abs 字段 host 为实际 IP , 修改配置如下：")]),t._m(48),t._m(49),a("p",[t._v("服务端文件变动会推送给客户端，客户端新增 AgreeSDK.app.resourceUpdate 方法。")]),t._m(50),t._m(51),a("p",[t._v("AgreeSDK 设备管理模块提供如下功能：清点设备、系统配置管理、收回设备、远程擦除、远程检查或控制。对于不同权限级别的用户提供了相应的权限管理。通过获得手机超级管理员权限，用户授权自己的应用设备管理权限后，可以在代码中修改很多系统设置，例如屏幕锁定（可实现 Home 键禁用）。")]),t._m(52),a("p",[t._v("为了在调用相关 API 时不再提示权限信息，在此之前需要先获取 DeviceOwner 权限。设置 DeviceOwner 权限是有限制的，需要手机账号（acount）为 0 .")]),a("p",[t._v("用命令查看手机的帐号：")]),t._m(53),a("p",[t._v("用 adb shell pm hide 来禁用上面提供的账号：")]),t._m(54),a("p",[t._v("注：这里 AccountType 为账户 Type 值。")]),a("p",[t._v("获取 DeviceOwner 权限的方法有多种，这里以执行 ADB 命令进行说明，在命令行执行 ADB 命令:")]),t._m(55),a("p",[t._v("注：这里 packagename 为当前应用的包名。")]),t._m(56),a("p",[t._v("JS 层在调用相关设备操作时，首先要通过 API 获取激活设备管理员，如下：")]),t._m(57),a("p",[t._v("调用该方法后应用会跳转到系统激活设备管理员界面，点击激活即可。")]),a("p",[t._v("判断是否激活设备管理员，可以使用下述方法进行测试：")]),t._m(58),a("p",[t._v("锁定应用（即屏蔽 Home 键），通过调用 JS 方法来锁定应用")]),t._m(59),a("p",[t._v("退出屏幕锁定需要执行：")]),t._m(60),t._m(61),a("p",[t._v("应用可视区域到系统状态栏下透明显示效果，如下图所示：")]),t._m(62),a("p",[t._v("此模式下应用占用全屏区域，而系统状态栏会拦截用户操作事件，此时需要预留出系统状态栏高度。")]),t._m(63),a("p",[t._v("应用默认不使用沉浸式状态栏样式，需要进行如下配置开启：")]),a("p",[t._v("打开应用的 manifest.json 文件，在 statusbar 下添加 immersed 节点并设置值为 true。")]),t._m(64),t._m(65),a("p",[t._v("可以通过 AgreeSDK.screen.statusBarHeight 获取状态栏的高度。")]),t._m(66),t._m(67),t._m(68),t._m(69),a("p",[t._v("设置配置文件启用沉浸式状态栏，然后添加以下配置。dark为深色，light为亮色，其实就是黑色和白色。此设置只有在android6.0及以上系统中可用，部分5.0的厂商定制设备可用。")]),t._m(70),t._m(71),a("p",[t._v("在不同的页面中可以修改状态栏背景颜色和字体风格，代码如下：")]),t._m(72),a("p",[t._v("其中style和上述设置状态栏的字体风格一样。backgroundColor在非沉浸式状态栏下可用，系统要求在android5.0以上，部分android5.0的厂商定制设备不可用。")]),t._m(73),a("p",[t._v("开机自启动设置可以让应用 app 在开机后自动打开，使用很简单，只需要遵循以下两个步骤：")]),t._m(74),a("p",[t._v('打开应用的 manifest.json 文件，设置"autoStart"节点为 true 或 false 即可。')]),t._m(75),t._m(76),t._m(77),a("p",[t._v("在手机或 pad 上，打开设置应用，找到权限管理或开机自启动管理，由于设备的不同导致设置的开机自启动权限授予的入口不同，需要耐心找到开机自启动权限打开的入口，以下两个示例是两个不同的设备的两个不同的入口。")]),t._m(78),t._m(79),t._m(80),t._m(81),a("p",[t._v("如果设置中没有授予权限的入口，请直接运行测试，如果找不到入口或者设置了不生效，请联系我们。")]),t._m(82),a("p",[t._v("在应用开发阶段我们使用调试基座扫描调试开发，基础开发完成后可以借助于赞同移动应用打包平台进行在线打包，也可以通过本地工程使用脚本离线打包。开发完成后可以将安装包上传到企业自己的应用商店，也可以使用赞同的应用商店和 EMM 管理平台，实现对安装包的版本管理和发布。\n应用内集成了两个基本功能：资源更新、基座更新。资源更新需要通过 abs 下发，当服务器部署资源文件有部分文件改动时，客户端会将服务器改动的文件差量下载更新到本地，而之前服务器其他未改动的文件则不会下载。差量文件更新是依据全局资源地图 GRM（Global Resource Map）下载的。服务器端 ABS workspace 下会有一个“.grm” 文件夹， HEAD 文件，在“.grm”文件夹中，存在一个名为 HEAD 的文件，里面存放的是当前 GRM 版本。存在一个名为 MAP+Version（version 是一串 MD5 加密后的字符串）的文件，里面内容是当前 Workspace 下的文件列表。\n作为独立应用安装时，客户端基座每次启动的时候都会检查服务端的版本信息，当服务端修改基座更新的配置后，客户端会提示基座更新的消息。应用更新是根据本地app的版本号和服务端app的版本号来判定更新的。这两个版本号中，任何一个检查到线上版本大于本地版本，都会提示更新。")]),t._m(83),t._m(84),t._m(85)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"agreesdk开发文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#agreesdk开发文档","aria-hidden":"true"}},[this._v("#")]),this._v(" AgreeSDK开发文档")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"agreesdk-是什么？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#agreesdk-是什么？","aria-hidden":"true"}},[this._v("#")]),this._v(" AgreeSDK 是什么？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://p6n8dwts1.bkt.clouddn.com/agreesdk_design.png",alt:"系统架构"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://p6n8dwts1.bkt.clouddn.com/agreesdk_plugin.png",alt:"插件分类"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"如何使用？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何使用？","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何使用？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("应用层直接在页面里面通过 "),s("code",[this._v("script")]),this._v(" 标签引入，如")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v('"AgreeSDK.js"')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" AgreeSDK "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"./AgreeSDK"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nVue"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("use")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  debug"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("debug:")]),this._v(" 是否打开应用内置控制控制台。需要说明的是 manifest.json 配置级别高于代码中的配置，只有当 manifest.json 里面 debugable 字段设置为 true 时，这里的 debug 设置才会生效。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("命名空间为 "),s("code",[this._v("AgreeSDK.moduleName.methodName")]),this._v("，在 Vue 组件里面也可以通过 "),s("code",[this._v("this.$sdk.moduleName.methodName")]),this._v(" 调用。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("JS 层调用参考 doc 文档，原生插件开发及配置见"),s("a",{attrs:{href:"#%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91"}},[this._v("插件开发")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"插件开发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件开发","aria-hidden":"true"}},[this._v("#")]),this._v(" 插件开发")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"开发工程结构说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发工程结构说明","aria-hidden":"true"}},[this._v("#")]),this._v(" 开发工程结构说明")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("app：开发主 Module\n"),a("ul",[a("li",[t._v("libs：依赖库(aar、jar、so)")]),a("li",[t._v("src/main\n"),a("ul",[a("li",[t._v("assets\n"),a("ul",[a("li",[t._v("res：AgreeSDKCore.aar 依赖的资源文件，\b 不建议修改(如：图片、语言)；")]),a("li",[t._v("data：AgreeSDKCore 默认配置，开发时可以 \b 根据实际情况进行修改；")]),a("li",[t._v("www：打包所需的交易资源和交易配置文件 manifest.json")])])]),a("li",[t._v("java：插件开发拓展原生代码；")]),a("li",[t._v("res：图标、启动页、应用名称等基本配置内容；")]),a("li",[t._v("AndroidManifest.xml：权限、原生 Acticity、Service 配置。")])])]),a("li",[t._v("build.gradle：gradle 打包脚本配置文件")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"js-层调用-java-层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-层调用-java-层","aria-hidden":"true"}},[this._v("#")]),this._v(" JS 层调用 Java 层")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"js-部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js-部分","aria-hidden":"true"}},[this._v("#")]),this._v(" JS 部分")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"同步调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同步调用","aria-hidden":"true"}},[this._v("#")]),this._v(" 同步调用:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Object AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bridge"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("execSync")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("service"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" action"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("service：调用插件方法对于的插件类别名")]),s("li",[this._v("action：调用插件方法的名称")]),s("li",[this._v("args：调用插件方法使用的参数列表")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"异步调用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步调用","aria-hidden":"true"}},[this._v("#")]),this._v(" 异步调用:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bridge"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("exec")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  completeCallback "),a("span",{attrs:{class:"token comment"}},[t._v("/* 成功或失败的回调函数 */")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  successCallback "),a("span",{attrs:{class:"token comment"}},[t._v("/* 成功的回调函数 */")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  failCallback "),a("span",{attrs:{class:"token comment"}},[t._v("/* 失败的回调函数 */")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  service "),a("span",{attrs:{class:"token comment"}},[t._v("/* 调用插件方法对于的插件类别名 */")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  action "),a("span",{attrs:{class:"token comment"}},[t._v("/* 调用插件方法的名称 */")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  args "),a("span",{attrs:{class:"token comment"}},[t._v("/* 调用插件方法使用的参数列表 */")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("completeCallback：成功或失败的回调函数")]),s("li",[this._v("successCallback：成功的回调函数")]),s("li",[this._v("failCallback：失败的回调函数")]),s("li",[this._v("service：调用插件方法对于的插件类别名")]),s("li",[this._v("action：调用插件方法的名称")]),s("li",[this._v("args：调用插件方法使用的参数列表")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"android-部分"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#android-部分","aria-hidden":"true"}},[this._v("#")]),this._v(" Android 部分")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"配置文件-assets-data-config-xml："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件-assets-data-config-xml：","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置文件 assets/data/config.xml：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{attrs:{class:"token prolog"}},[t._v("<?xml version='1.0' encoding='utf-8'?>")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("widget")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!--测试插件--\x3e")]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("feature")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Test"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android-package"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cn.com.agree.abc.sdk.app.plugins.TestFeatureImpl"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("feature")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("widget")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"同步调用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#同步调用-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 同步调用:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("/**\n  * 同步调用\n  *\n  * @param webView\n  * @param array\n  * @param callbackContext\n  * @return\n  */")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@JavaScriptApi")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" String "),a("span",{attrs:{class:"token function"}},[t._v("syncTest")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgreeSDKWebView webView"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSONArray array"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CallbackContext callbackContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    JSONObject jsonObject "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JSONObject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"syncTest"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"function"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"sync function"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token class-name"}},[t._v("JSONException")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" callbackContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("execSync")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h5",{attrs:{id:"异步调用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步调用-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 异步调用:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("/**\n  * 异步调用\n  *\n  * @param webView\n  * @param array\n  * @param callbackContext\n  * @return\n  */")]),t._v("\n"),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@JavaScriptApi")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("asyncTest")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AgreeSDKWebView webView"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JSONArray array"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" CallbackContext callbackContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    JSONObject jsonObject "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("JSONObject")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"name"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"asyncTest"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("put")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"function"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"async function"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token class-name"}},[t._v("JSONException")]),t._v(" e"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        e"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("printStackTrace")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    callbackContext"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("success")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"java-层调用-js-层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-层调用-js-层","aria-hidden":"true"}},[this._v("#")]),this._v(" Java 层调用 JS 层")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Android 原生提供了执行 JavaScript 的 API，在插件类里面可以通过 "),s("code",[this._v("JSUtil.evaluateJavascript(AgreeSDKWebView webView, String js)")]),this._v(" 或 "),s("code",[this._v("webView.evaluateJavascript(String js)")]),this._v("调用。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[t._v("webView"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setWebViewClient")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("WebViewClient")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("onPageFinished")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("WebView view"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String url"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onPageFinished")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        JSUtil"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("evaluateJavascript")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("view"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("\"AgreeSDK.bridge.fireDocumentEvent('titleUpdate', '\"")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" view"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getTitle")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"\')"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"titleUpdate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("alert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"title: "')]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"插件初始化及其生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件初始化及其生命周期","aria-hidden":"true"}},[this._v("#")]),this._v(" 插件初始化及其生命周期")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("一个插件对象的一个实例是为每个 WebView 的生命创建的，插件不会被实例化，直到它们被 JavaScript 的调用首次引用为止，除非在 config.xml 中将具有 onload name 属性的"),s("code",[this._v("<param>")]),this._v("设置为“true”。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("feature")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Test"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n     "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("android-package"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("cn.com.agree.abc.sdk.app.plugins.TestFeatureImpl"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("param")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("name")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("onload"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("value")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("feature")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-Java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("initialize")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Context context"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" AgreeSDKWebView webView"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("initialize")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" webView"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// 自定义逻辑")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("插件还可以访问 Android 生命周期事件，并可以通过扩展所提供的方法（"),s("code",[this._v("onResume")]),this._v("，"),s("code",[this._v("onDestroy")]),this._v("等）来处理它们。具有长时间运行请求的插件，媒体播放，侦听器或内部状态等背景活动应实现 "),s("code",[this._v("onReset()")]),this._v(" 方法。 当 WebView 导航到新页面或刷新时，它会执行，这会重新加载 JavaScript。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"异步费时操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#异步费时操作","aria-hidden":"true"}},[this._v("#")]),this._v(" 异步费时操作")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("AgreeSDK Android 插件默认是在 WebView 界面的主线程中运行，而 Cordova 插件是在 WebCore 线程上运行，所以 AgreeSDK 插件执行原生 UI 更新不需要写在"),s("code",[this._v("runOnUiThread")]),this._v(" 中，这极大的简化了调用流程，同时也是上述支持同步的根本原因。如果不需要在 UI 线程上运行也不希望阻止 WebCore 线程，则可以使用"),s("code",[this._v("webview.getActivity().getThreadPool()")]),this._v(" 获得的 AgreeSDK "),s("code",[this._v("ExecutorService")]),this._v(" 执行代码，也可以使用 Android 原生的异步编程的方法，如 Handler、AsyncTask 等。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("AsyncTask")]),a("span",{attrs:{class:"token generics function"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Void"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" String"),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" isSuccess "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" String "),a("span",{attrs:{class:"token function"}},[t._v("doInBackground")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" strings"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        String result "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// 子线程处理费事操作")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("onPostExecute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("String result"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// 操作结束主线程")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("execute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"资源更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 资源更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"更新逻辑流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新逻辑流程","aria-hidden":"true"}},[this._v("#")]),this._v(" 更新逻辑流程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"初始化本地-grm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化本地-grm","aria-hidden":"true"}},[this._v("#")]),this._v(" 初始化本地 GRM")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"获取远程-grm-版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取远程-grm-版本号","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取远程 GRM 版本号")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"读取本地-map-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#读取本地-map-文件","aria-hidden":"true"}},[this._v("#")]),this._v(" 读取本地 MAP 文件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"对比标记值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对比标记值","aria-hidden":"true"}},[this._v("#")]),this._v(" 对比标记值")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"配置使用说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置使用说明","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置使用说明")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token string"}},[t._v('"abs"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"host"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"192.168.89.173"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"httpPort"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("50002")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"httpsPort"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("50004")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"apkUpdate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"resourceUpdate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"remoteProjectPath"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"/app"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"资源热更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源热更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 资源热更新")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("open")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  url"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ws://192.168.187.124:50010/ws/broadcast"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  oid"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"agree_oid"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  data"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("onOpen")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"onOpen"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("onMessage")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" response "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("parse")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" type "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"resourceUpdate"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{attrs:{class:"token comment"}},[t._v("// 建议替换为 AUI 提示框")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" isUpdate "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("confirm")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"有新的资源需要更新，是否进行更新！"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("isUpdate"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{attrs:{class:"token comment"}},[t._v("// 资源更新逻辑")]),t._v("\n          AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("resourceUpdate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            success"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("restartApp")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            fail"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ui"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("toast")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("message"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("break")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("onClose")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"onClose"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("onError")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"onError"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"设备管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设备管理","aria-hidden":"true"}},[this._v("#")]),this._v(" 设备管理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"设置设备拥有者权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置设备拥有者权限","aria-hidden":"true"}},[this._v("#")]),this._v(" 设置设备拥有者权限")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("adb shell dumpsys account\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("adb shell pm hide AccountType\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("adb shell dpm set-device-owner packagename/cn.com.agree.abc.sdk.core.security.SDKDeviceAdminReceiver\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"调用设备管理-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用设备管理-api","aria-hidden":"true"}},[this._v("#")]),this._v(" 调用设备管理 API")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("activeAdmin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("isAdminActive")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("startLockTask")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("device"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stopLockTask")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"沉浸式状态栏设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#沉浸式状态栏设置","aria-hidden":"true"}},[this._v("#")]),this._v(" 沉浸式状态栏设置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"http://p6n8dwts1.bkt.clouddn.com/statusbar.png",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"第一步：设置配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步：设置配置文件","aria-hidden":"true"}},[this._v("#")]),this._v(" 第一步：设置配置文件")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token property"}},[t._v('"statusbar"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"immersed"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"第二步：使用-api-获取状态栏高度，动态调整页面元素内边距高度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步：使用-api-获取状态栏高度，动态调整页面元素内边距高度","aria-hidden":"true"}},[this._v("#")]),this._v(" 第二步：使用 API 获取状态栏高度，动态调整页面元素内边距高度")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("header")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("header"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("header"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("头部"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("header")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("class")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("ref")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("content"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("内容"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 设置状态栏")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("$nextTick")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// 获取状态栏高度")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" statusBarHeight "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("screen"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusBarHeight"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// 设置相关高度")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("header"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("paddingTop "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" statusBarHeight "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"px"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("content"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("paddingTop "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("50")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" statusBarHeight "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"px"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"其他设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他设置","aria-hidden":"true"}},[this._v("#")]),this._v(" 其他设置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"设置状态栏的字体风格"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置状态栏的字体风格","aria-hidden":"true"}},[this._v("#")]),this._v(" 设置状态栏的字体风格")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token string"}},[t._v('"statusbar"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"immersed"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"style"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"dark"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"js调用修改状态栏"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js调用修改状态栏","aria-hidden":"true"}},[this._v("#")]),this._v(" js调用修改状态栏")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("AgreeSDK"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setStatusBar")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   style"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token string"}},[t._v("'dark'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   backgroundColor"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"开机自启动设置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开机自启动设置","aria-hidden":"true"}},[this._v("#")]),this._v(" 开机自启动设置")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"第一步：设置配置文件-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步：设置配置文件-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 第一步：设置配置文件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token property"}},[this._v('"autoStart"')]),s("span",{attrs:{class:"token operator"}},[this._v(":")]),this._v(" "),s("span",{attrs:{class:"token boolean"}},[this._v("true")]),s("span",{attrs:{class:"token punctuation"}},[this._v(",")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"第二步：打开app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步：打开app","aria-hidden":"true"}},[this._v("#")]),this._v(" 第二步：打开app")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"第三步：授予app开机自启动权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步：授予app开机自启动权限","aria-hidden":"true"}},[this._v("#")]),this._v(" 第三步：授予app开机自启动权限")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("这个入口直接在设置界面上")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://ws1.sinaimg.cn/large/006tNc79ly1fr7geztee7j31hc0xcdjy.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("这个入口是在设置的权限管理中")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://ws1.sinaimg.cn/large/006tNc79ly1fr7ggmi270j31kw0zkjve.jpg",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"应用更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#应用更新","aria-hidden":"true"}},[this._v("#")]),this._v(" 应用更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"使用步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用步骤")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[a("p",[t._v("打开应用的manifest.json文件，在preference->abs中配置apkUpdate为true，apkUpdateUrl地址为应用最新版本的信息文件或者接口。")]),a("div",{staticClass:"language-xml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[t._v('"preference": {\n    /* ABS 基本配置 */\n    "abs": {\n      "host": "192.9.63.248",\n      "httpPort": 50002,\n      "httpsPort": 50004,\n      "apkUpdate": true,\n      "resourceUpdate": false,\n      "apkUpdateUrl": "https://www.agree.com/update.txt"\n    }\n}\n')])])])]),a("li",[a("p",[t._v("编写接口文件update.txt，并遵循以下格式。")]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"versionName"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"v1.0.1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"versionCode"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"apkUrl"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"https://raw.githubusercontent.com/WVector/AppUpdateDemo/master/apk/sample-debug.apk"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"updateLog"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1，添加删除信用卡接口。\\r\\n2，添加vip认证。\\r\\n3，区分自定义消费，一个小时不限制。\\r\\n4，添加放弃任务接口，小时内不生成。\\r\\n5，消费任务手动生成。"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"apkSize"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"5M"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{attrs:{class:"token property"}},[t._v('"constraint"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("其中versionName代表版本名称，versionCode代表版本号，apkUrl代表更新的apk的下载地址，updateLog代表更新日志，apkSize代表apk的大小，constraint代表是否强制更新。")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("打开应用即可测试应用更新。\n"),s("img",{attrs:{src:"https://ws4.sinaimg.cn/large/006tKfTcly1ftju0ecz06j31hc0xcwz7.jpg",alt:""}})])}],!1,null,null,null);s.default=e.exports}}]);